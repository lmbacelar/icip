= simple_nested_form_for target do |f|
  = f.error_messages

  -# TODO
  -# Make this a multistep form
  -# Step 1. Set Details
  -# Step 2. Add (existing) image(s)
  -# Step 3. Add checkpoint(s) existing parts and locations
  .group
    .title Details
    .inputs
      = f.association :author, include_blank: false, input_html: { readonly: true }
      = f.input :notes, as: :string, input_html: { size: 80 }

  .columns
    .fix.left
      .group
        .title Images
        .content
          %br
          = f.association :images, label: false, input_html: { size: 20 }
          %p
            (To select multiple images use
            %strong Ctrl + Click
            )

    .fix.right
      -# TODO
      -# Move to partial.
      -# Can't do it now because of nested_form bug on haml partials
      .group
        .title Checkpoints
        -# .content
        -#   = f.fields_for :checkpoints, f.object.checkpoints.sort_natural do |c|
        -#     -#
        -#     -# TODO
        -#     -# 1. Change number to location relation
        -#     -# 2. Change description to p/n description
        -#     = c.text_field :number, label: false, placeholder: "(#{:number})", size: 1
        -#     -#= c.select :location, f.object.images.map { |i| i.locations.map { |o| [o.name, o.id] } }.flatten(1),
        -#     -#                      label: false, placeholder: "(#{:number})", size: 1
        -#     = c.text_field :description, label: false, placeholder: "(#{:description})", size: 25
        -#     = c.text_field :pn, label: false, placeholder: '(P/N)', size: 20
        -#     = c.link_to_remove 'Remove'
        -#   = f.link_to_add 'Add Item', :checkpoints

  = f.submit

